<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0" />
<title>Heart Balloon Â· Interactive String</title>
<style>
html,body{
  margin:0;
  height:100%;
  width:100%;
  background:transparent;
  overflow:hidden;
}

/* main balloon styling */
svg{
  position:absolute;
  width:160px;
  height:420px;
  filter:drop-shadow(0 0 18px rgba(255,80,150,0.6));
  animation:float 14s ease-in-out infinite;
  cursor:grab;
  transition:transform 0.1s ease;
  user-select:none;
  touch-action:none;
}

/* floating animation */
@keyframes float{
  0%{transform:translate(0,0);}
  25%{transform:translate(30px,-25px);}
  50%{transform:translate(-20px,-15px);}
  75%{transform:translate(15px,20px);}
  100%{transform:translate(0,0);}
}

/* soft sway for string */
#string{
  transform-origin:top center;
  animation:sway 8s ease-in-out infinite;
}
@keyframes sway{
  0%{transform:rotate(0deg);}
  25%{transform:rotate(1.2deg);}
  50%{transform:rotate(0deg);}
  75%{transform:rotate(-1.2deg);}
  100%{transform:rotate(0deg);}
}

/* demo buttons to collide with */
button{
  position:absolute;
  padding:10px 20px;
  border:none;
  border-radius:8px;
  background:#ff4fa5;
  color:#fff;
  font-weight:bold;
  cursor:pointer;
  font-family:sans-serif;
}
#btn1{top:40%;left:40%;}
#btn2{top:70%;left:60%;}
</style>
</head>
<body>

<!-- demo buttons -->
<button id="btn1">Add</button>
<button id="btn2">Replace</button>

<!-- Heart balloon -->
<svg id="balloon" viewBox="0 0 100 400">
  <defs>
    <radialGradient id="grad" cx="35%" cy="25%" r="65%">
      <stop offset="0%" stop-color="#ffb7df"/>
      <stop offset="40%" stop-color="#ff4fa5"/>
      <stop offset="100%" stop-color="#ff007b"/>
    </radialGradient>
    <linearGradient id="stringGrad" x1="0" y1="0" x2="0" y2="1">
      <stop offset="0%" stop-color="rgba(255,47,137,0.9)"/>
      <stop offset="100%" stop-color="rgba(255,47,137,0)" />
    </linearGradient>
  </defs>

  <path fill="url(#grad)" d="
    M50 20
    C35 0, 5 10, 5 40
    C5 70, 40 100, 50 130
    C60 100, 95 70, 95 40
    C95 10, 65 0, 50 20
    Q50 132, 50 134
  "/>

  <path id="string" d="
    M50 134
    C50 150, 47 165, 55 195
    S60 235, 45 270
    S55 310, 65 325
    S45 345, 50 360
    S60 380, 50 395
  "
  stroke="url(#stringGrad)" stroke-width="2.6" stroke-linecap="round" fill="none"/>
</svg>

<script>
const balloon = document.getElementById("balloon");
const string = document.getElementById("string");
const buttons = document.querySelectorAll("button");

/* random start */
function randomPosition(){
  const vw=window.innerWidth;
  const vh=window.innerHeight;
  const x=Math.random()*(vw-160);
  const y=Math.random()*(vh-420);
  balloon.style.left=`${x}px`;
  balloon.style.top=`${y}px`;
  balloon.style.animationDuration=`${12+Math.random()*6}s`;
}
randomPosition();

/* drag logic */
let isDown=false, offsetX=0, offsetY=0;

function startDrag(e){
  isDown=true;
  const point = e.touches ? e.touches[0] : e;
  const rect = balloon.getBoundingClientRect();
  offsetX = point.clientX - rect.left;
  offsetY = point.clientY - rect.top;
  balloon.style.cursor="grabbing";
  balloon.style.animationPlayState="paused";
}

function stopDrag(){
  isDown=false;
  balloon.style.cursor="grab";
  balloon.style.animationPlayState="running";
}

function moveDrag(e){
  if(!isDown)return;
  const point = e.touches ? e.touches[0] : e;
  const newX = point.clientX - offsetX;
  const newY = point.clientY - offsetY;
  balloon.style.left = newX + "px";
  balloon.style.top  = newY + "px";
  e.preventDefault();

  bendString(newX,newY);
}

/* string bending logic */
function bendString(bx,by){
  let cx1=50, cy1=150, cx2=47, cy2=165; // base
  const bxCenter = bx + 50;
  const byAnchor = by + 134;

  const rects = [...buttons].map(b=>b.getBoundingClientRect());
  for(const r of rects){
    const midX = (r.left+r.right)/2;
    const midY = (r.top+r.bottom)/2;
    const distX = bxCenter - midX;
    const distY = byAnchor - midY;
    const withinX = bxCenter>r.left-40 && bxCenter<r.right+40;
    const withinY = byAnchor>r.top-40 && byAnchor<r.bottom+40;
    if(withinX && withinY){
      cx1 += distX*0.03;
      cy1 += distY*0.03;
      cx2 += distX*0.02;
      cy2 += distY*0.02;
    }
  }
  const d = `
    M50 134
    C${cx1} ${cy1}, ${cx2} ${cy2}, 55 195
    S60 235, 45 270
    S55 310, 65 325
    S45 345, 50 360
    S60 380, 50 395
  `;
  string.setAttribute("d",d);
}

balloon.addEventListener("mousedown",startDrag);
balloon.addEventListener("touchstart",startDrag);
document.addEventListener("mouseup",stopDrag);
document.addEventListener("touchend",stopDrag);
document.addEventListener("mousemove",moveDrag);
document.addEventListener("touchmove",moveDrag);
</script>

</body>
</html>
